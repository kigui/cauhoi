<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Dog Quiz - Sequential</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        body {
            font-family: 'VT323', monospace;
            background-color: #f0f8ff;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background-image: radial-gradient(#d0e8ff 2px, transparent 2px);
            background-size: 20px 20px;
        }

        #pet-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
            width: 300px;
        }

        #speech-bubble {
            background: white;
            border: 3px solid black;
            padding: 20px;
            border-radius: 15px;
            position: relative;
            margin-bottom: 20px;
            width: 100%;
            box-sizing: border-box;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.2);
            font-size: 22px;
            text-align: center;
        }

        #speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 15px 15px 0;
            border-style: solid;
            border-color: black transparent transparent transparent;
        }

        #dog-box {
            width: 300px;
            height: 250px;
            background-color: #ffcc00;
            border: 2px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
            animation: softBounce 2s infinite ease-in-out;
        }

        @keyframes softBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        #dog-box:hover {
            background-color: #ffd633;
        }

        #pixel-dog-img {
            width: 90%;
            height: 90%;
            object-fit: cover;
            image-rendering: pixelated; 
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-top: 15px;
            font-family: 'VT323', monospace;
            font-size: 20px;
            box-sizing: border-box;
            border: 2px solid black;
            text-align: center;
        }

        button {
            margin-top: 10px;
            background: #333;
            color: white;
            border: 2px solid black;
            padding: 8px 10px;
            font-family: 'VT323', monospace;
            cursor: pointer;
            width: 100%;
            font-size: 20px;
            transition: all 0.1s;
        }

        button:hover {
            background: #555;
            transform: translate(2px, 2px);
            box-shadow: -2px -2px 0 black;
        }
        
        button:active {
            transform: translate(4px, 4px);
             box-shadow: none;
        }

        #score-board {
            position: absolute;
            top: -15px;
            right: -10px;
            background: #d32f2f;
            color: white;
            padding: 5px 10px;
            font-size: 18px;
            border: 2px solid black;
            transform: rotate(5deg);
        }

        #letter-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .letter {
            background: #fff8dc;
            width: 90%;
            max-width: 450px;
            padding: 40px;
            border: 3px solid #8b4513;
            box-shadow: 15px 15px 0px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            transform: rotate(-2deg);
            animation: popIn 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        @keyframes popIn {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            100% { transform: scale(1) rotate(-2deg); opacity: 1; }
        }

        .letter h1 { color: #d32f2f; margin-top: 0; font-size: 40px; letter-spacing: 2px; }
        .letter p { font-size: 26px; line-height: 1.4; color: #333; }
        .stamp {
            position: absolute;
            top: 20px; right: 20px;
            border: 3px dotted red;
            padding: 5px 10px; color: red;
            transform: rotate(15deg); font-weight: bold; font-size: 24px;
        }
    </style>
</head>
<body>

    <div id="pet-container">
        <div id="speech-bubble">
            <div id="score-board">ƒêi·ªÉm: <span id="score-val">0</span>/5</div>
            <p id="question-text" style="margin: 0;">Ch√†o m·ª´ng! T√¥i l√† Con M·ª° k·∫ª g√°c nh√† c·ªßa M·ªπ √ù. N·∫øu mu·ªën g·∫∑p M·ªπ √ù th√¨ ph·∫£i tr·∫£ l·ªùi c√¢u h·ªèi?</p>
            
            <div id="input-area" style="display:none;">
                <input type="text" id="user-answer" placeholder="Nh·∫≠p ƒë√°p √°n..." autocomplete="off">
                <button onclick="checkAnswer()">G·ª≠i tr·∫£ l·ªùi</button>
            </div>
            
            <button id="start-btn" onclick="startGame()">Th·ª≠ th√°ch ngay!</button>
        </div>

        <div id="dog-box" onclick="pokeDog()">
            <img id="pixel-dog-img" src="15c144e8dc552a100b3292d268854499.gif" alt="Pixel Dog">
        </div>
    </div>

    <div id="letter-overlay">
        <div class="letter">
            <div class="stamp">ƒê√É CH·ª®NG NH·∫¨N</div>
            <h1>TH∆Ø CH√öC M·ª™NG</h1>
            <hr style="border-top: 2px dashed #8b4513;">
            <p>Tuy·ªát v·ªùi!</p>
            <p>B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng c·∫£ 5 c√¢u h·ªèi. H√£y v√†o nh√† v√† h√¥n M·ªπ √Ω m·ªôt c√°i ƒëi nh√© :)).</p>
            <p style="font-size: 50px; margin: 20px 0;">üèÜ ü¶¥ ü¶¥ ü¶¥</p>
            <button onclick="closeLetter()" style="background:#d32f2f; border-color: #a00000;">Nh·∫≠n ph·∫ßn th∆∞·ªüng</button>
        </div>
    </div>

    <script>
        // --- PH·∫¶N LOGIC ƒê√É ƒê∆Ø·ª¢C S·ª¨A ---
        let score = 0;
        let currentQuestionIndex = 0; // Bi·∫øn n√†y ƒë·ªÉ theo d√µi c√¢u h·ªèi s·ªë m·∫•y
        const targetScore = 5;
        
        const questions = [
            { q: "M√Ω √ù c√≥ t√™n ·ªü nh√† l√† g√¨?", a: ["loan"] },
            { q: "M·ªπ √ù th√≠ch ƒÉn tr√°i c√¢y lo·∫°i g√¨?", a: ["d∆∞a h·∫•u", "qu·∫£ d∆∞a h·∫•u"] },
            { q: "Con m·ª° c√≥ m√†u g√¨?", a: ["v√†ng", "m√†u v√†ng"] },
            { q: "M·ªπ √Ω c√≥ hay ng·ªß s·ªõm kh√¥ng?", a: ["kh√¥ng", "ko", "k"] },
            { q: "M·ªπ √Ω c√≥ ph·∫£i l√† ng∆∞·ªùi xinh ƒë·∫πp kh√¥ng?", a: ["c√≥", "yes", "ƒë√∫ng", "xinh"] }
        ];

        let currentQuestion = null;

        const qText = document.getElementById('question-text');
        const inputArea = document.getElementById('input-area');
        const startBtn = document.getElementById('start-btn');
        const scoreVal = document.getElementById('score-val');
        const inputField = document.getElementById('user-answer');
        const dogImg = document.getElementById('pixel-dog-img');

        function startGame() {
            startBtn.style.display = 'none';
            inputArea.style.display = 'block';
            score = 0;
            currentQuestionIndex = 0; // ƒê·∫∑t l·∫°i v·ªÅ c√¢u ƒë·∫ßu ti√™n
            scoreVal.innerText = score;
            qText.innerText = "ƒêang t·∫£i c√¢u h·ªèi...";
            setTimeout(loadQuestion, 500);
        }

        // H√†m m·ªõi: Load c√¢u h·ªèi theo th·ª© t·ª±
        function loadQuestion() {
            if (currentQuestionIndex < questions.length) {
                currentQuestion = questions[currentQuestionIndex];
                // Hi·ªán s·ªë th·ª© t·ª± c√¢u h·ªèi cho d·ªÖ theo d√µi
                qText.innerText = `C√¢u ${currentQuestionIndex + 1}: ` + currentQuestion.q;
                inputField.value = '';
                inputField.focus();
            } else {
                showVictory();
            }
        }

        function checkAnswer() {
            const userAns = inputField.value.trim().toLowerCase();
            
            // N·∫øu ƒë√∫ng
            if (currentQuestion.a.includes(userAns)) {
                score++;
                currentQuestionIndex++; // TƒÉng s·ªë th·ª© t·ª± ƒë·ªÉ qua c√¢u ti·∫øp theo
                scoreVal.innerText = score;
                qText.innerHTML = "<span style='color:green'>Ch√≠nh x√°c! ü¶¥</span>";
                
                if (score >= targetScore) {
                    setTimeout(showVictory, 1000);
                } else {
                    setTimeout(loadQuestion, 1000);
                }
            } else {
                // N·∫øu sai: Gi·ªØ nguy√™n c√¢u h·ªèi ƒë√≥, b·∫Øt tr·∫£ l·ªùi l·∫°i
                qText.innerHTML = "<span style='color:red'>Sai r·ªìi! Th·ª≠ l·∫°i ƒëi n√†o.</span>";
                // Kh√¥ng g·ªçi loadQuestion() ƒë·ªÉ ng∆∞·ªùi ch∆°i v·∫´n ·ªü c√¢u hi·ªán t·∫°i
            }
        }

        inputField.addEventListener("keypress", function(event) {
            if (event.key === "Enter") checkAnswer();
        });

        function showVictory() {
            document.getElementById('letter-overlay').style.display = 'flex';
            inputArea.style.display = 'none';
            qText.innerText = "B·∫°n ƒë√£ chi·∫øn th·∫Øng!";
            startBtn.style.display = 'block';
            startBtn.innerText = "Ch∆°i l·∫°i t·ª´ ƒë·∫ßu";
        }

        function closeLetter() {
            document.getElementById('letter-overlay').style.display = 'none';
            score = 0; scoreVal.innerText = 0;
            currentQuestionIndex = 0;
        }

        function pokeDog() {
            if(inputArea.style.display === 'none') {
                 qText.innerText = "G√¢u! ƒê·ª´ng ch·∫°m v√†o t√¥i, h√£y b·∫•m 'Th·ª≠ th√°ch ngay'!";
                 dogImg.style.transform = "translateX(5px)";
                 setTimeout(() => { dogImg.style.transform = "translateX(0)"; }, 100);
            }
        }
    </script>
</body>
</html>
